function getLicenseControlInput(a){return a.find("input")}function getLicenseControlResultContainer(a){return a.find(".cuar-ajax-container > span")}function getLicenseControlAddOn(a){return getLicenseControlInput(a).data("addon")}function validateLicense(a,b){var c=getLicenseControlInput(b),d=getLicenseControlResultContainer(b);if(""==c.val().trim())return void d.html("");d.html(cuarAdminMessages.checking).removeClass().addClass("cuar-ajax-running"),c.prop("disabled",!0);var e={action:"cuar_validate_license",addon_id:getLicenseControlAddOn(b),license:c.val()};a.post(ajaxurl,e,function(a){c.prop("disabled",!1),d.removeClass().addClass(a.success?"cuar-ajax-success":"cuar-ajax-failure").html(a.message)},"json",function(){c.prop("disabled",!1),d.removeClass().addClass("cuar-ajax-failure").html(cuarAdminMessages.unreachableLicenseServerError)})}!function(a){a.cuar||(a.cuar={}),a.cuar.fileAttachmentManager=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("cuar.fileAttachmentManager",d),d.init=function(){d.options=a.extend({},a.cuar.fileAttachmentManager.defaultOptions,c),d._getSelectors().first().show(),d._getSelectorInput().change(d._onSelectorInputChanged),d._getAttachmentList().on("click",".cuar-remove-action",d._onRemoveActionClick),a(document).on("cuar:attachmentManager:addItem",d._onAddAttachmentItem)},d._onSelectorInputChanged=function(){var b=d._getSelectors(),c=a(this).val(),e=b.filter(function(){return a(this).data("method")==c});if(!e.is(":visible")){var f=b.filter(":visible");f.length<=0?e.fadeToggle():f.fadeToggle("fast",function(){e.fadeToggle()})}},d._onRemoveActionClick=function(b){if(b.preventDefault(),confirm(cuar.confirmDeleteAttachedFile)){var c=a(this).closest(d.options.attachmentItem),e=c.data("post-id"),f=c.data("filename");d._updateAttachmentItemState(c,"pending"),a.post(cuar.ajaxUrl,{action:"cuar_remove_attached_file",post_id:e,filename:f},function(a){0==a.success?(a.data.length>0&&alert(a.data[0]),d._updateAttachmentItemState(c,"error")):c.slideUp(400,function(){c.remove()})})}},d._onAddAttachmentItem=function(b,c,e,f,g,h){var i=d._getAttachmentItems().filter(function(){return a(this).data("filename")==f});0==i.length&&(i=d._getAttachmentTemplate().clone(),i.appendTo(d.options.attachmentList)),(void 0===g||0==g.trim().length)&&(g=f),d._updateAttachmentItem(i,e,f,g),d._updateAttachmentItemState(i,"pending"),a.post(cuar.ajaxUrl,{action:"cuar_attach_file",method:c,post_id:e,filename:f,caption:g,extra:h},function(b){0==b.success?(b.data.length>0&&alert(b.data[0]),d._updateAttachmentItemState(i,"error")):(d._updateAttachmentItemState(i,"success"),a(document).trigger("cuar:attachmentManager:fileAttached",[e,f]))})},d._updateAttachmentItem=function(a,b,c,d){a.data("post-id",b),a.data("filename",c),a.children(".cuar-caption").html(d)},d._updateAttachmentItemState=function(a,b){a.removeClass(function(a,b){return(b.match(/(^|\s)cuar-state-\S+/g)||[]).join(" ")}),a.addClass("cuar-state-"+b);var c=a.children(".cuar-actions"),d=a.children(".cuar-progress");switch(b){case"pending":c.hide(),d.show();break;case"error":c.show(),d.hide();break;case"success":c.show(),d.hide()}},d._getAttachmentList=function(){return a(d.options.attachmentList,d.el)},d._getAttachmentItems=function(){return a(d.options.attachmentList+">"+d.options.attachmentItem,d.el)},d._getAttachmentTemplate=function(){return a(d.options.attachmentItemTemplate,d.el).children(d.options.attachmentItem).first()},d._getSelectorInput=function(){return a(d.options.selectorInput,d.el)},d._getSelectors=function(){return a(d.options.selectorList+">"+d.options.selectorItem,d.el)},d.init()},a.cuar.fileAttachmentManager.defaultOptions={attachmentList:".cuar-file-attachments",attachmentItem:".cuar-file-attachment",attachmentItemTemplate:".cuar-file-attachment-template",selectorList:".cuar-file-selectors",selectorItem:".cuar-file-selector",selectorInput:".cuar-file-selector-input"},a.fn.fileAttachmentManager=function(b){return this.each(function(){new a.cuar.fileAttachmentManager(this,b)})}}(jQuery),jQuery(document).ready(function(a){var b=a(".license-control");b.each(function(){var b=a(this);validateLicense(a,b),getLicenseControlInput(b).change(function(){validateLicense(a,b)})})});
//# sourceMappingURL=customer-area.js.map